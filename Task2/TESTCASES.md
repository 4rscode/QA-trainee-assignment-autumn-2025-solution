# Тест-кейсы для API микросервиса объявлений

## Эндпоинт: POST /api/1/item - Создание объявления

### Позитивные тест-кейсы

#### TC001: Создание объявления с валидными данными
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  
- sellerID в диапазоне 111111-999999  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с телом:  
```json
{
  "sellerID": 123456,
  "name": "Test Item",
  "price": 9900,
  "statistics": {
    "likes": 21,
    "viewCount": 11,
    "contacts": 43
  }
}
```

**Ожидаемый результат:**  
- Код ответа: 200  
- Тело ответа содержит JSON с полями: id, sellerId, name, price, statistics, createdAt  

**Фактический результат:**  
- Код ответа: 200  
- Тело ответа: `{"status": "Сохранили объявление - <uuid>"}`  

**Статус:** Failed  
**Комментарий:** Формат ответа не соответствует документации. В ответе отсутствуют ожидаемые поля.

---

#### TC002: Создание объявления с минимальными валидными данными
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  
- sellerID в диапазоне 111111-999999  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с телом:  
```json
{
  "sellerID": 111111,
  "name": "Test",
  "price": 1,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**  
- Код ответа: 200  

**Фактический результат:**  
- Код ответа: 200  

**Статус:** Passed

---

#### TC003: Создание объявления с максимальными значениями
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  
- sellerID в диапазоне 111111-999999  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с телом:  
```json
{
  "sellerID": 999999,
  "name": "Test Item",
  "price": 2147483647,
  "statistics": {
    "likes": 2147483647,
    "viewCount": 2147483647,
    "contacts": 2147483647
  }
}
```

**Ожидаемый результат:**  
- Код ответа: 200  

**Фактический результат:**  
- Код ответа: 200  

**Статус:** Passed

---

#### TC004: Создание объявления с граничными значениями sellerID
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с sellerID=111111  
2. Отправить POST запрос на /api/1/item с sellerID=999999  

**Ожидаемый результат:**  
- Код ответа: 200 для обоих запросов  

**Фактический результат:**  
- Код ответа: 200 для обоих запросов  

**Статус:** Passed

---

#### TC005: Создание объявления со специальными символами в названии
**Приоритет:** Low  
**Предусловия:**  
- Сервер доступен  
- sellerID в диапазоне 111111-999999  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с name="Тест @#$% 100%"  

**Ожидаемый результат:**  
- Код ответа: 200  

**Фактический результат:**  
- Код ответа: 200  

**Статус:** Passed

---

### Негативные тест-кейсы

#### TC006: Создание объявления без обязательного поля sellerID
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с телом без поля sellerID  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed

---

#### TC007: Создание объявления без обязательного поля name
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с телом без поля name  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed

---

#### TC008: Создание объявления без обязательного поля price
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с телом без поля price  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed

---

#### TC009: Создание объявления без обязательного поля statistics
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с телом без поля statistics  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed

---

#### TC010: Создание объявления с отрицательной ценой
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с price=-100  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 200  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер принимает отрицательные цены

---

#### TC011: Создание объявления с нулевой ценой
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с price=0  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed

---

#### TC012: Создание объявления с пустым названием
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с name=""  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed

---

#### TC013: Создание объявления с отрицательной статистикой
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с statistics: {"likes": -5, "viewCount": -10, "contacts": -1}  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 200  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер принимает отрицательную статистику

---

#### TC014: Создание объявления с нулевой статистикой
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить POST запрос на /api/1/item с statistics: {"likes": 0, "viewCount": 0, "contacts": 0}  

**Ожидаемый результат:**  
- Код ответа: 200  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер не принимает нулевую статистику

---

#### TC015: Создание нескольких объявлений от одного продавца
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  
- sellerID в диапазоне 111111-999999  

**Шаги:**  
1. Отправить несколько POST запросов на /api/1/item с одинаковым sellerID  

**Ожидаемый результат:**  
- Код ответа: 200 для каждого запроса  

**Фактический результат:**  
- Код ответа: 200 для каждого запроса  

**Статус:** Passed


Отлично! Вот тест-кейсы для эндпоинта GET `/api/1/item/:id` в том же формате:

## Эндпоинт: GET /api/1/item/:id - Получение объявления по идентификатору

### Позитивные тест-кейсы

#### TC016: Получение существующего объявления по ID
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  
- Объявление создано и имеет валидный ID  

**Шаги:**  
1. Создать объявление через POST /api/1/item  
2. Получить ID из ответа  
3. Отправить GET запрос на /api/1/item/{id}  

**Ожидаемый результат:**  
- Код ответа: 200  
- Тело ответа содержит JSON с полями: id, sellerId, name, price, statistics, createdAt  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 400 вместо 200 для существующих объявлений

---

#### TC017: Получение объявления несколько раз подряд
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  
- Объявление создано и имеет валидный ID  

**Шаги:**  
1. Создать объявление через POST /api/1/item  
2. Получить ID из ответа  
3. Отправить 3 GET запроса на /api/1/item/{id} подряд  

**Ожидаемый результат:**  
- Код ответа: 200 для всех запросов  
- Данные в ответах идентичны  

**Фактический результат:**  
- Код ответа: 400 для всех запросов  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 400 вместо 200

---

### Негативные тест-кейсы

#### TC018: Получение несуществующего объявления
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/item/nonexistent_id_12345  

**Ожидаемый результат:**  
- Код ответа: 404  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 400 вместо 404 для несуществующих объявлений

---

#### TC019: Получение объявления с пустым ID
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/item/  

**Ожидаемый результат:**  
- Код ответа: 400 или 404  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed

---

#### TC020: Получение объявления с ID содержащим специальные символы
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/item/test@#$%^  
2. Отправить GET запрос на /api/1/item/id-with-dashes  
3. Отправить GET запрос на /api/1/item/id_with_underscores  

**Ожидаемый результат:**  
- Код ответа: 400 для всех запросов  

**Фактический результат:**  
- Код ответа: 400 для всех запросов  

**Статус:** Passed

---

#### TC021: Получение объявления с SQL injection в ID
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/item/1; DROP TABLE items; --  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed  
**Комментарий:** Защита от SQL injection работает корректно

---

#### TC022: Получение объявления с XSS в ID
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/item/<script>alert('xss')</script>  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed  
**Комментарий:** Защита от XSS работает корректно

---

#### TC023: Получение объявления с очень длинным ID
**Приоритет:** Low  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/item/aaaaaaaa...[1000 символов]  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed

---

#### TC024: Получение объявления с числовым ID
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/item/123456  

**Ожидаемый результат:**  
- Код ответа: 404  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 400 вместо 404

---

#### TC025: Получение объявления с граничными значениями ID
**Приоритет:** Low  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запросы на /api/1/item/ с ID: "", "   ", "null", "undefined", "true", "false", "0", "-1", "1.5"  

**Ожидаемый результат:**  
- Код ответа: 400 или 404 для всех запросов  

**Фактический результат:**  
- Код ответа: 400 для всех запросов  

**Статус:** Passed

---

## Тест-кейсы производительности

#### TC026: Проверка времени ответа для получения объявления
**Приоритет:** Low  
**Предусловия:**  
- Сервер доступен  
- Объявление создано  

**Шаги:**  
1. Создать объявление  
2. Засечь время выполнения GET запроса  
3. Получить объявление по ID  

**Ожидаемый результат:**  
- Время ответа < 2 секунд  
- Код ответа: 200  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Failed  
**Комментарий:** **БАГ** - Невозможно проверить производительность из-за ошибки 400

---

#### TC027: Последовательные запросы одного объявления
**Приоритет:** Low  
**Предусловия:**  
- Сервер доступен  
- Объявление создано  

**Шаги:**  
1. Создать объявление  
2. Выполнить 5 последовательных GET запросов к одному объявлению  

**Ожидаемый результат:**  
- Код ответа: 200 для всех запросов  

**Фактический результат:**  
- Код ответа: 400 для всех запросов  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 400 вместо 200

## Эндпоинт: GET /api/1/:sellerID/item - Получение всех объявлений по идентификатору продавца

### Позитивные тест-кейсы

#### TC028: Успешное получение объявлений существующего продавца
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  
- Продавец с ID в диапазоне 111111-999999 существует и имеет несколько объявлений  

**Шаги:**  
1. Создать несколько объявлений для одного продавца  
2. Отправить GET запрос на /api/1/{sellerID}/item  

**Ожидаемый результат:**  
- Код ответа: 200  
- Тело ответа содержит JSON-массив с объявлениями продавца  
- Каждое объявление содержит поля: id, sellerId, name, price, statistics, createdAt  

**Фактический результат:**  
- Код ответа: 200  
- Тело ответа: массив объявлений с ожидаемыми полями  

**Статус:** Passed  

---

#### TC029: Получение пустого списка для продавца без объявлений
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  
- Продавец с ID в диапазоне 111111-999999 не имеет объявлений  

**Шаги:**  
1. Отправить GET запрос на /api/1/{sellerID}/item  

**Ожидаемый результат:**  
- Код ответа: 200  
- Тело ответа: пустой массив []  

**Фактический результат:**  
- Код ответа: 200  
- Тело ответа: пустой массив или массив с 0 элементов  

**Статус:** Passed  

---

#### TC030: Получение объявлений с граничными значениями sellerID
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/111111/item  
2. Отправить GET запрос на /api/1/999999/item  

**Ожидаемый результат:**  
- Код ответа: 200 для обоих запросов  

**Фактический результат:**  
- Код ответа: 200 для обоих запросов  

**Статус:** Passed  

---

#### TC031: Проверка изоляции данных между разными продавцами
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  
- Созданы два разных продавца с объявлениями  

**Шаги:**  
1. Создать объявления для продавца A  
2. Создать объявления для продавца B  
3. Запросить объявления продавца A  
4. Проверить, что в ответе только объявления продавца A  

**Ожидаемый результат:**  
- Код ответа: 200  
- Все объявления в ответе имеют sellerId = ID продавца A  

**Фактический результат:**  
- Код ответа: 200  
- Все объявления принадлежат запрошенному продавцу  

**Статус:** Passed  

---

### Негативные тест-кейсы

#### TC032: Получение объявлений с невалидным форматом sellerID (строка)
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/invalid_string/item  

**Ожидаемый результат:**  
- Код ответа: 400 Bad Request  

**Фактический результат:**  
- Код ответа: 405 Method Not Allowed  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 405 вместо 400  

---

#### TC033: Получение объявлений с отрицательным sellerID
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/-123456/item  

**Ожидаемый результат:**  
- Код ответа: 400 Bad Request  

**Фактический результат:**  
- Код ответа: 200 OK  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер принимает отрицательные sellerID  

---

#### TC034: Получение объявлений с sellerID содержащим специальные символы
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/@#$%^/item  

**Ожидаемый результат:**  
- Код ответа: 400 Bad Request  

**Фактический результат:**  
- Код ответа: 405 Method Not Allowed  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 405 вместо 400  

---

#### TC035: Получение объявлений с sellerID содержащим SQL инъекцию
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/1; DROP TABLE items; --/item  

**Ожидаемый результат:**  
- Код ответа: 400 Bad Request  

**Фактический результат:**  
- Код ответа: 405 Method Not Allowed  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 405 вместо 400, но защита от SQL инъекции сработала  

---

#### TC036: Получение объявлений с sellerID содержащим XSS
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/<script>alert('xss')</script>/item  

**Ожидаемый результат:**  
- Код ответа: 400 Bad Request  

**Фактический результат:**  
- Код ответа: 405 Method Not Allowed  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 405 вместо 400, но защита от XSS сработала  



# Тест-кейсы для эндпоинтов статистики

## Эндпоинт: GET /api/1/statistic/:id - Получить статистику по объявлению (v1)
## Эндпоинт: GET /api/2/statistic/:id - Получить статистику по объявлению (v2)

### Позитивные тест-кейсы

#### TC036: Успешное получение статистики существующего объявления через API v1
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  
- Объявление создано и имеет валидный ID  

**Шаги:**  
1. Создать объявление через POST /api/1/item  
2. Получить ID из ответа  
3. Отправить GET запрос на /api/1/statistic/{id}  

**Ожидаемый результат:**  
- Код ответа: 200  
- Тело ответа содержит JSON-массив с объектами статистики, каждый с полями: likes, viewCount, contacts  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 400 вместо 200 для существующих объявлений

---

#### TC037: Успешное получение статистики существующего объявления через API v2
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  
- Объявление создано и имеет валидный ID  

**Шаги:**  
1. Создать объявление через POST /api/1/item  
2. Получить ID из ответа  
3. Отправить GET запрос на /api/2/statistic/{id}  

**Ожидаемый результат:**  
- Код ответа: 200 или 100 (согласно документации)  
- Тело ответа содержит JSON-массив с объектами статистики, каждый с полями: likes, viewCount, contacts  

**Фактический результат:**  
- Код ответа: 404  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 404 вместо 200/100 для существующих объявлений

---

### Негативные тест-кейсы

#### TC038: Получение статистики несуществующего объявления через API v1
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/statistic/nonexistent_stat_id_123  

**Ожидаемый результат:**  
- Код ответа: 404  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 400 вместо 404

---

#### TC039: Получение статистики несуществующего объявления через API v2
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/2/statistic/nonexistent_stat_id_123  

**Ожидаемый результат:**  
- Код ответа: 404  

**Фактический результат:**  
- Код ответа: 404  

**Статус:** Passed

---

#### TC040: Получение статистики с невалидным ID через API v1
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/statistic/invalid_id  
2. Отправить GET запрос на /api/1/statistic/123-abc  
3. Отправить GET запрос на /api/1/statistic/@#$%  
4. Отправить GET запрос на /api/1/statistic/ (пустой ID)  

**Ожидаемый результат:**  
- Код ответа: 400 для всех запросов  

**Фактический результат:**  
- Код ответа: 400 для всех запросов  

**Статус:** Passed

---

#### TC041: Получение статистики с невалидным ID через API v2
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/2/statistic/invalid_id  
2. Отправить GET запрос на /api/2/statistic/123-abc  
3. Отправить GET запрос на /api/2/statistic/@#$%  
4. Отправить GET запрос на /api/2/statistic/ (пустой ID)  

**Ожидаемый результат:**  
- Код ответа: 400 для всех запросов  

**Фактический результат:**  
- Код ответа: 400 для всех запросов  

**Статус:** Passed

---

#### TC042: Получение статистики с ID содержащим SQL инъекцию через API v1
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/statistic/1; DROP TABLE statistics; --  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed  
**Комментарий:** Защита от SQL инъекции работает

---

#### TC043: Получение статистики с ID содержащим XSS через API v1
**Приоритет:** High  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/statistic/<script>alert('xss')</script>  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed  
**Комментарий:** Защита от XSS работает

---

#### TC044: Получение статистики с очень длинным ID через API v1
**Приоритет:** Low  
**Предусловия:**  
- Сервер доступен  

**Шаги:**  
1. Отправить GET запрос на /api/1/statistic/aaaaaaaa...[1000 символов]  

**Ожидаемый результат:**  
- Код ответа: 400  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Passed

---

#### TC045: Получение статистики после удаления объявления через API v1
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  
- Объявление создано и удалено  

**Шаги:**  
1. Создать объявление  
2. Удалить объявление через DELETE /api/2/item/{id}  
3. Отправить GET запрос на /api/1/statistic/{id}  

**Ожидаемый результат:**  
- Код ответа: 404  

**Фактический результат:**  
- Код ответа: 400  

**Статус:** Failed  
**Комментарий:** **БАГ** - Сервер возвращает 400 вместо 404

---

#### TC046: Получение статистики после удаления объявления через API v2
**Приоритет:** Medium  
**Предусловия:**  
- Сервер доступен  
- Объявление создано и удалено  

**Шаги:**  
1. Создать объявление  
2. Удалить объявление через DELETE /api/2/item/{id}  
3. Отправить GET запрос на /api/2/statistic/{id}  

**Ожидаемый результат:**  
- Код ответа: 404  

**Фактический результат:**  
- Код ответа: 404  

**Статус:** Passed

